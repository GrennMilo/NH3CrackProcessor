<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NH3 Cracking - Documentation</title>
    <style>
        /* Embedded minimalist dark style */
        :root {
            --bg-color: #1a1a1a;
            --text-color: #e4e4e4;
            --heading-color: #ffffff;
            --link-color: #4a9df8;
            --link-hover-color: #6db1ff;
            --code-bg: #2a2a2a;
            --border-color: #444;
            --section-bg: #262626;
            --accent-color: #5f9ee9;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --error-color: #f44336;
            --info-color: #2196f3;
            
            --content-width: 1200px;
            --toc-width: 280px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            
            --font-mono: 'Courier New', monospace;
            --border-radius: 4px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 70px;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
        }
        
        .main-container {
            display: flex;
            max-width: 100%;
            position: relative;
        }
        
        header {
            background-color: var(--section-bg);
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            width: 100%;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        header h1 {
            margin: 0;
            font-size: 1.8em;
            padding-bottom: var(--spacing-sm);
        }
        
        header nav {
            margin-top: var(--spacing-sm);
        }
        
        header nav a {
            margin-right: var(--spacing-lg);
            color: var(--text-color);
            text-decoration: none;
        }
        
        header nav a:hover {
            color: var(--link-hover-color);
        }
        
        .content-wrapper {
            display: flex;
            width: 100%;
            max-width: var(--content-width);
            margin: 0 auto;
        }
        
        .main-content {
            flex: 1;
            padding: var(--spacing-lg);
            margin-right: var(--toc-width);
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: var(--heading-color);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }
        
        h2 {
            font-size: 2em;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-sm);
            scroll-margin-top: 70px;
        }
        
        h3 {
            font-size: 1.5em;
            scroll-margin-top: 70px;
        }
        
        h4 {
            font-size: 1.2em;
            scroll-margin-top: 70px;
        }
        
        p {
            margin-bottom: var(--spacing-md);
        }
        
        a {
            color: var(--link-color);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        a:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }
        
        code {
            font-family: var(--font-mono);
            background-color: var(--code-bg);
            padding: 2px 4px;
            border-radius: var(--border-radius);
            font-size: 0.9em;
        }
        
        pre {
            background-color: var(--code-bg);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            overflow-x: auto;
            margin: var(--spacing-md) 0;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
            border-radius: 0;
            font-size: 0.9em;
        }
        
        ul, ol {
            margin-bottom: var(--spacing-md);
            padding-left: var(--spacing-lg);
        }
        
        li {
            margin-bottom: var(--spacing-sm);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacing-lg) 0;
        }
        
        th, td {
            padding: var(--spacing-md);
            border: 1px solid var(--border-color);
            text-align: left;
        }
        
        th {
            background-color: var(--code-bg);
        }
        
        img {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius);
        }
        
        .toc {
            position: fixed;
            right: 0;
            top: 0;
            width: var(--toc-width);
            height: 100vh;
            overflow-y: auto;
            padding: var(--spacing-lg);
            background-color: var(--section-bg);
            border-left: 1px solid var(--border-color);
            z-index: 900;
            margin-top: 60px;
        }
        
        .toc h3 {
            margin-top: 0;
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--border-color);
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc ul ul {
            padding-left: var(--spacing-md);
        }
        
        .toc li {
            margin-bottom: var(--spacing-sm);
        }
        
        .toc a {
            color: var(--text-color);
            text-decoration: none;
            display: block;
            padding: var(--spacing-sm) 0;
            transition: color 0.2s;
        }
        
        .toc a:hover {
            color: var(--link-hover-color);
        }
        
        #back-to-top {
            position: fixed;
            bottom: var(--spacing-lg);
            right: var(--spacing-lg);
            background-color: var(--section-bg);
            color: var(--text-color);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            display: none;
            z-index: 1000;
            text-decoration: none;
        }
        
        #back-to-top:hover {
            color: var(--link-hover-color);
            background-color: #333333;
        }
        
        /* Additional styles for the troubleshooting section */
        .troubleshooting-item {
            background-color: #2d2d2d;
            border-left: 4px solid var(--accent-color);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }
        
        .troubleshooting-item h4 {
            margin-top: 0;
            color: var(--heading-color);
            font-size: 1.2em;
        }
        
        .troubleshooting-item ul {
            margin-bottom: 0;
        }
        
        /* Styling for tables */
        .config-table, .logs-table, .api-table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacing-md) 0;
            font-size: 0.9em;
        }
        
        .config-table th, .logs-table th, .api-table th {
            background-color: var(--code-bg);
            color: var(--heading-color);
            text-align: left;
            padding: var(--spacing-md);
            border-bottom: 2px solid var(--border-color);
        }
        
        .config-table td, .logs-table td, .api-table td {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }
        
        .config-table tr:nth-child(even), 
        .logs-table tr:nth-child(even), 
        .api-table tr:nth-child(even) {
            background-color: rgba(255, 255, 255, 0.03);
        }
        
        /* Footer note styling */
        .footer-note {
            margin-top: var(--spacing-xl);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-color);
            font-size: 0.9em;
            color: #999;
        }
        
        /* Section dividers */
        .section-divider {
            border: 0;
            height: 1px;
            background: var(--border-color);
            margin: var(--spacing-xl) 0;
        }
        
        /* Responsive styles */
        @media (max-width: 1200px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .main-content {
                margin-right: 0;
                padding-right: var(--spacing-lg);
            }
            
            .toc {
                position: relative;
                width: 100%;
                height: auto;
                border-left: none;
                border-bottom: 1px solid var(--border-color);
                margin-top: 0;
                padding-top: var(--spacing-lg);
                padding-bottom: var(--spacing-lg);
            }
        }
    </style>
    
        <div class="content-wrapper">
            <div class="main-content">
                <section id="overview">
                    <h2>Overview</h2>
                    <p>NH3 Cracking Processor and Visualizer is a specialized tool designed for scientists and engineers working with ammonia cracking experiments. It automates the processing of raw experimental data, detects different experimental stages, performs necessary data transformations, and generates interactive visualizations for analysis.</p>
                    
                    <p>The application is built with Python using Flask for the web framework, Pandas and NumPy for data processing, and Plotly for interactive data visualization. It provides both a user-friendly web interface and programmatic access through a comprehensive API.</p>
                    
                    <p>Key capabilities include:</p>
                    <ul>
                        <li>Automated processing of tab-separated experimental data files</li>
                        <li>Detection and separation of experimental stages</li>
                        <li>Time vector creation and data interpolation</li>
                        <li>Generation of interactive visualizations for different data categories</li>
                        <li>Support for multiple file encodings and date formats</li>
                        <li>Export of processed data in CSV and JSON formats</li>
                        <li>Dark-themed interface optimized for data visualization</li>
                        <li>RESTful API for programmatic access and automation</li>
                        <li>Batch processing capabilities for multiple files</li>
                        <li>Advanced error handling and recovery mechanisms</li>
                    </ul>
                    
                    <p>This tool streamlines the analysis workflow for NH3 cracking experiments, allowing researchers to focus on interpreting results rather than managing data processing tasks. The interactive visualizations enable deeper insights into experimental outcomes and facilitate the identification of trends across different stages and experimental conditions.</p>
                </section>
                
                <hr class="section-divider">
                
                <section id="features">
                    <h2>Features</h2>
                    <h3>Data Processing Capabilities</h3>
                    <ul>
                        <li><strong>Automated Data Processing</strong>: Process experimental data from tab-separated text files with a single click</li>
                        <li><strong>Multi-Encoding Support</strong>: Automatically handles files with different text encodings (UTF-8, Latin1, CP1252, ISO-8859-1)</li>
                        <li><strong>Intelligent DateTime Parsing</strong>: Handles multiple date-time formats automatically</li>
                        <li><strong>Stage Detection</strong>: Automatically detect and separate experimental stages based on the Stage column</li>
                        <li><strong>Data Interpolation</strong>: Perform cubic interpolation for a consistent time vector with 1-minute intervals</li>
                        <li><strong>Missing Data Handling</strong>: Gracefully handles missing or incomplete data</li>
                        <li><strong>Batch Processing</strong>: Process multiple files at once, enabling efficient bulk data handling</li>
                    </ul>
                    
                    <h3>Analysis and Visualization</h3>
                    <ul>
                        <li><strong>Category-Based Analysis</strong>: Automatically organizes measurements into logical categories (temperature, pressure, flow, etc.)</li>
                        <li><strong>Interactive Visualization</strong>: Generate Plotly-based interactive visualizations with zoom, pan, and hover capabilities</li>
                        <li><strong>Dark-Mode Optimized UI</strong>: Dark-themed interface with high-contrast plots for better data visibility</li>
                        <li><strong>Specialized Plot Categories</strong>:
                            <ul>
                                <li>Temperature measurements</li>
                                <li>Multipoint temperature measurements</li>
                                <li>Saturator temperature</li>
                                <li>Pressure measurements</li>
                                <li>Flow measurements</li>
                                <li>Outlet stream composition</li>
                            </ul>
                        </li>
                        <li><strong>Plot Customization</strong>: Customize plot appearance with different themes, colors, and layouts</li>
                        <li><strong>Export Options</strong>: Export visualizations as PNG, SVG, or PDF files</li>
                    </ul>
                    
                    <h3>Interface and Access</h3>
                    <ul>
                        <li><strong>Web Interface</strong>: Easy-to-use web interface for data management and visualization</li>
                        <li><strong>RESTful API</strong>: Comprehensive API with endpoints for all functionality</li>
                        <li><strong>Responsive Design</strong>: Works on desktop and tablet devices</li>
                        <li><strong>File Management</strong>: Upload, process, and manage multiple experimental data files</li>
                        <li><strong>Command Line Interface</strong>: Process files from the command line for automated workflows</li>
                    </ul>
                    
                    <h3>Data Management</h3>
                    <ul>
                        <li><strong>Structured Output</strong>: Organized directory structure for processed data and visualizations</li>
                        <li><strong>Multiple Export Formats</strong>: Export data in CSV and JSON formats</li>
                        <li><strong>Experiment Metadata</strong>: Comprehensive metadata for each experiment, including stage information and column statistics</li>
                        <li><strong>NaN Handling</strong>: Special handling of NaN values in JSON output for better compatibility</li>
                        <li><strong>Error Recovery</strong>: Advanced error handling and recovery mechanisms</li>
                    </ul>
                </section>
                
                <hr class="section-divider">
                
                <section id="installation">
                    <h2>Installation</h2>
                    <p>Follow these steps to install and set up the NH3 Cracking Processor and Visualizer:</p>
                    
                    <h3 id="prerequisites">Prerequisites</h3>
                    <ul>
                        <li>Python 3.7 or higher</li>
                        <li>pip (Python package installer)</li>
                        <li>Git (optional, for cloning the repository)</li>
                    </ul>
                    
                    <h3 id="installation-steps">Installation Steps</h3>
                    <ol>
                        <li>
                            <p><strong>Clone or download the repository:</strong></p>
                   download or share the file from the repository.</p>
                        </li>
                        <li>
                            <p><strong>Create and activate a virtual environment (recommended):</strong></p>
                            <pre><code># On Windows
python -m venv venv
venv\Scripts\activate

# On macOS/Linux
python3 -m venv venv
source venv/bin/activate</code></pre>
                        </li>
                        <li>
                            <p><strong>Install required dependencies:</strong></p>
                            <pre><code>pip install -r requirements.txt</code></pre>
                        </li>
                        <li>
                            <p><strong>Create necessary directories:</strong></p>
                            <pre><code>mkdir -p uploads Reports logs</code></pre>
                        </li>
                    </ol>
                    
                    <h3 id="verifying-installation">Verifying Installation</h3>
                    <p>To verify that the installation was successful, run the test server:</p>
                    <pre><code>python Processors/test_server.py</code></pre>
                    <p>You should see output indicating that the test server is running, typically on <code>http://127.0.0.1:8082</code>.</p>
                </section>
                
                <hr class="section-divider">
                
                <section id="quick-start">
                    <h2>Quick Start</h2>
                    <p>This section provides a quick guide to get you started with the NH3 Cracking Processor and Visualizer.</p>
                    
                    <h3 id="running-the-application">Running the Application</h3>
                    <p>The application can be run in several modes depending on your needs:</p>
                    
                    <h4>Standard Mode</h4>
                    <p>For normal operation with the full web interface:</p>
                    <pre><code>python run.py</code></pre>
                    <p>By default, the application will run on <code>http://0.0.0.0:8080</code>.</p>
                    
                    <h4>Debug Mode</h4>
                    <p>For development with debug information:</p>
                    <pre><code>python run.py --mode debug</code></pre>
                    
                    <h4>Basic Mode</h4>
                    <p>For a simplified server for testing:</p>
                    <pre><code>python run.py --mode basic</code></pre>
                    
                    <h4>Custom Port</h4>
                    <p>To run on a custom port:</p>
                    <pre><code>python run.py --port 8888</code></pre>
                    
                    <h3 id="processing-data">Processing Data</h3>
                    <p>There are several ways to process experimental data:</p>
                    
                    <h4>Using the Web Interface</h4>
                    <ol>
                        <li>Start the application using one of the commands above</li>
                        <li>Navigate to <code>http://localhost:8080</code> in your web browser</li>
                        <li>Click on "Upload" in the navigation bar</li>
                        <li>Select and upload a tab-separated text file containing experimental data</li>
                        <li>The application will automatically process the file and display the results</li>
                    </ol>
                    
                    <h4>Using the Quick Start Script</h4>
                    <p>For batch processing all files in the uploads folder:</p>
                    <pre><code>python Processors/quick_start.py</code></pre>
                    <p>This script processes all files in the uploads folder and then starts the web interface.</p>
                    
                    <h4>Using the Process All Script</h4>
                    <p>To process all files without starting the web interface:</p>
                    <pre><code>python Processors/process_all.py</code></pre>
                    
                    <h3 id="viewing-results">Viewing Results</h3>
                    <p>After processing data, you can view the results in several ways:</p>
                    <ol>
                        <li>Through the web interface at <code>http://localhost:8080</code></li>
                        <li>By directly accessing the JSON and CSV files in the Reports folder</li>
                        <li>Through the API endpoints for programmatic access</li>
                    </ol>
                    
                    <h3 id="sample-data">Sample Data</h3>
                    <p>A sample data file is included in the repository for testing purposes. You can process it using:</p>
                    <pre><code>python Processors/quick_start.py --pattern "sample_data.txt"</code></pre>
                </section>
                
                <hr class="section-divider">
                
                <section id="data-processing">
                    <h2>Data Processing</h2>
                    
                    <h3 id="input-format">Input Format</h3>
                    <p>The processor expects tab-separated text files (.txt) with the following structure:</p>
                    <ol>
                        <li><strong>First column</strong>: Date/time information in various formats (e.g., DD/MM/YY HH:MM:SS)</li>
                        <li><strong>Second column</strong>: Stage identifier (integer values to identify different experimental stages)</li>
                        <li><strong>Remaining columns</strong>: Numeric measurement data for various parameters</li>
                    </ol>
                    
                    <p>Example of expected input format:</p>
                    <pre><code>DateTime            Stage    R1/2 T set [°C]    R1/2 T read [°C]    Pressure [bar]    Flow [Nml/min]  ........
01/06/24 12:34:56    1        450.2              451.3               25.3              380.5
01/06/24 12:35:56    1        451.3              452.4               25.4              380.2
01/06/24 12:36:56    1        450.8              451.9               25.2              380.4
01/06/24 12:37:56    2        460.1              461.2               26.0              381.0
01/06/24 12:38:56    2        461.5              462.6               26.1              381.2</code></pre>
                    
                    <p>The application supports multiple date/time formats:</p>
                    <ul>
                        <li>DD/MM/YY HH:MM:SS</li>
                        <li>YYYY-MM-DD HH:MM:SS</li>
                        <li>DD/MM/YYYY HH:MM:SS</li>
                        <li>MM/DD/YY HH:MM:SS</li>
                        <li>MM/DD/YYYY HH:MM:SS</li>
                    </ul>
                    
                    <p>And multiple file encodings:</p>
                    <ul>
                        <li>UTF-8</li>
                        <li>Latin1 (ISO-8859-1)</li>
                        <li>CP1252</li>
                        <li>ISO-8859-1</li>
                    </ul>
                    
                    <h3 id="processing-pipeline">Processing Pipeline</h3>
                    <p>The data processing pipeline consists of the following steps:</p>
                    <ol>
                        <li><strong>File Reading</strong>: The application reads the tab-separated file using pandas, automatically detecting the correct encoding.</li>
                        <li><strong>Time Vector Creation</strong>: The application converts datetime strings to a consistent time vector in minutes.</li>
                        <li><strong>Stage Detection</strong>: The application identifies different experimental stages based on the Stage column.</li>
                        <li><strong>Data Interpolation</strong>: The application performs cubic interpolation to create a consistent time grid with 1-minute intervals.</li>
                        <li><strong>Data Organization</strong>: The application organizes the data into different categories (temperature, pressure, flow, etc.).</li>
                        <li><strong>Plotly JSON Generation</strong>: The application generates Plotly JSON files for different data views.</li>
                        <li><strong>Data Export</strong>: The application exports processed data in CSV and JSON formats.</li>
                    </ol>
                    
                    <h3 id="time-vector-handling">Time Vector Handling</h3>
                    <p>Time vector handling is a critical aspect of the processing pipeline. The application converts various datetime formats into a consistent relative time vector in minutes, making it easier to analyze and visualize the data.</p>
                    
                    <p>The code snippet below illustrates how datetime values are converted to minutes from the start of the experiment:</p>
                    <pre><code>def create_time_vector(self, df):
    # Assume first column is datetime
    datetime_col = df.columns[0]
    
    # Try different datetime formats
    date_formats = [
        '%d/%m/%y %H:%M:%S',  # DD/MM/YY HH:MM:SS
        '%Y-%m-%d %H:%M:%S',  # YYYY-MM-DD HH:MM:SS
        '%d/%m/%Y %H:%M:%S',  # DD/MM/YYYY HH:MM:SS
        '%m/%d/%y %H:%M:%S',  # MM/DD/YY HH:MM:SS
        '%m/%d/%Y %H:%M:%S',  # MM/DD/YYYY HH:MM:SS
    ]
    
    for date_format in date_formats:
        try:
            # Convert datetime strings to datetime objects
            df[datetime_col] = pd.to_datetime(df[datetime_col], format=date_format)
            break
        except ValueError:
            continue
    
    # Create time vector in minutes from start
    start_time = df[datetime_col].min()
    df['Time_Minutes'] = (df[datetime_col] - start_time).dt.total_seconds() / 60</code></pre>
                    
                    <p>If datetime parsing fails, the application creates a sequential time vector as a fallback:</p>
                    <pre><code># Fallback: create sequential time vector
df['Time_Minutes'] = np.arange(len(df))</code></pre>
                    
                    <h3 id="stage-detection">Stage Detection</h3>
                    <p>The application detects different experimental stages by examining the second column of the input data, which is expected to contain stage identifiers (integer values). This allows the application to separate the data into different stages for analysis and visualization.</p>
                    
                    <pre><code>def slice_by_stages(self, df):
    # Ensure the Stage column exists
    if 'Stage' not in df.columns:
        # Look for stage column in second position (index 1)
        if len(df.columns) > 1:
            stage_col = df.columns[1]
            df.rename(columns={stage_col: 'Stage'}, inplace=True)
        else:
            df['Stage'] = 1
            return {1: df}
    
    # Group data by stage values
    stages = {}
    stage_groups = df.groupby('Stage')
    
    for stage_num, stage_data in stage_groups:
        stages[int(stage_num)] = stage_data.copy()
    
    return stages</code></pre>
                    
                    <p>Each stage is stored as a separate dataset and processed independently, allowing for stage-specific analysis and visualization.</p>
                    
                    <h3 id="data-interpolation">Data Interpolation</h3>
                    <p>To ensure a consistent time grid across all measurements, the application performs cubic interpolation for all numeric columns. This is particularly important for creating smooth visualizations and for comparing data across different stages.</p>
                    
                    <pre><code>def perform_interpolation(self, df, target_interval_minutes=1):
    # Create target time vector with 1-minute intervals
    time_min = df['Time_Minutes'].min()
    time_max = df['Time_Minutes'].max()
    target_time = np.arange(time_min, time_max + target_interval_minutes, target_interval_minutes)
    
    # Create new dataframe for interpolated data
    interpolated_df = pd.DataFrame({'Time_Minutes': target_time})
    
    # Get numeric columns (excluding time and stage columns)
    numeric_columns = df.select_dtypes(include=[np.number]).columns.tolist()
    exclude_cols = ['Time_Minutes', 'Stage']
    numeric_columns = [col for col in numeric_columns if col not in exclude_cols]
    
    # Interpolate each numeric column
    for col in numeric_columns:
        # Remove NaN values for interpolation
        mask = ~(df['Time_Minutes'].isna() | df[col].isna())
        if mask.sum() > 3:  # Need at least 4 points for cubic interpolation
            x = df.loc[mask, 'Time_Minutes'].values
            y = df.loc[mask, col].values
            
            # Create interpolation function
            f = interp1d(x, y, kind='cubic', bounds_error=False, fill_value='extrapolate')
            interpolated_df[col] = f(target_time)
        else:
            interpolated_df[col] = np.nan</code></pre>
                    
                    <p>The application uses cubic interpolation when there are at least 4 data points, which provides smooth curves. For the Stage column, the application uses nearest-neighbor interpolation to maintain the integrity of the stage identifiers.</p>
                    
                    <h3 id="nan-handling">NaN Handling in JSON</h3>
                    <p>JSON does not support NaN (Not a Number) values, which can cause issues when the data contains missing or invalid measurements. The application uses a custom JSON encoder to handle NaN values:</p>
                    
                    <pre><code>class CustomJSONEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, (np.integer, np.floating, np.bool_)):
            return obj.item()
        if pd.isna(obj):
            return None
        if np.isnan(obj):
            return None
        if np.isinf(obj):
            return None
        return super().default(obj)</code></pre>
                    
                    <p>This encoder converts NaN values to <code>null</code>, which is a valid JSON value and can be properly handled by JavaScript.</p>
                    
                    <h3 id="file-output">File Output and Organization</h3>
                    <p>After processing, the application generates several types of output files:</p>
                    <ol>
                        <li><strong>Experiment Summary (JSON)</strong>: Contains metadata about the experiment, including stage information and column statistics.</li>
                        <li><strong>Complete Data (CSV)</strong>: Contains all the data from the experiment in CSV format.</li>
                        <li><strong>Complete Data (JSON)</strong>: Contains all the data from the experiment in JSON format.</li>
                        <li><strong>Stage Data (CSV)</strong>: Contains the data for each stage in CSV format.</li>
                        <li><strong>Stage Data (JSON)</strong>: Contains the data for each stage in JSON format.</li>
                        <li><strong>Plotly JSON Files</strong>: Contains the Plotly visualization data for different views.</li>
                    </ol>
                    
                    <p>These files are organized in a hierarchical directory structure:</p>
                    <pre><code>Reports/
└── 24_06_10 13_21_12/                     # Experiment directory
    ├── experiment_summary.json            # Experiment metadata and summary
    ├── 24_06_10 13_21_12_complete.csv     # Complete experiment data in CSV format
    ├── 24_06_10 13_21_12_all_stages.json  # Complete experiment data in JSON format
    ├── 24_06_10 13_21_12_temp_plotly_data.json  # Temperature plot data
    └── stage_2/                           # Stage-specific directory
        ├── stage_2_data.csv               # Stage data in CSV format
        ├── stage_2_data.json              # Stage data in JSON format
        └── stage_2_temp_plotly.json       # Stage temperature plot data</code></pre>
                </section>
                
                <hr class="section-divider">
                
                <section id="api-reference">
                    <h2>API Reference</h2>
                    <p>The NH3 Cracking Processor and Visualizer provides a comprehensive RESTful API for programmatic access to its functionality. This allows integration with other systems and automation of data processing and visualization tasks.</p>
                    
                    <h3 id="api-endpoints">API Endpoints</h3>
                    <table class="api-table">
                        <thead>
                            <tr>
                                <th>Endpoint</th>
                                <th>Method</th>
                                <th>Description</th>
                                <th>Parameters</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>/api/experiments</code></td>
                                <td>GET</td>
                                <td>Get a list of all processed experiments</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td><code>/api/experiment/&lt;experiment_name&gt;/overall</code></td>
                                <td>GET</td>
                                <td>Get overall plot data for an experiment</td>
                                <td><code>type</code>: Plot type (temperature, multipoint, saturator, pressure, flow, outlet)</td>
                            </tr>
                            <tr>
                                <td><code>/api/experiment/&lt;experiment_name&gt;/stage/&lt;stage_num&gt;</code></td>
                                <td>GET</td>
                                <td>Get plot data for a specific stage</td>
                                <td><code>type</code>: Plot type (temperature, multipoint, saturator, pressure, flow, outlet)</td>
                            </tr>
                            <tr>
                                <td><code>/api/process/&lt;experiment_name&gt;</code></td>
                                <td>GET</td>
                                <td>Process a specific experiment</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td><code>/api/process-all</code></td>
                                <td>GET</td>
                                <td>Process all experiments in the uploads folder</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td><code>/api/visualize/&lt;experiment_name&gt;</code></td>
                                <td>GET</td>
                                <td>Generate visualizations for an experiment</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td><code>/api/experiment/&lt;experiment_name&gt;/fix-json</code></td>
                                <td>GET</td>
                                <td>Fix JSON files with NaN values for a specific experiment</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td><code>/api/upload</code></td>
                                <td>POST</td>
                                <td>Upload a new experimental data file</td>
                                <td><code>file</code>: The experimental data file</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3 id="api-examples">API Response Examples</h3>
                    
                    <h4>Experiment List Endpoint</h4>
                    <p><code>GET /api/experiments</code></p>
                    <p>Returns a list of all processed experiments with their metadata.</p>
                    <pre><code>{
  "experiments": [
    {
      "name": "24_06_10 13_21_12",
      "summary": {
        "metadata": {
          "processed_at": "2025-05-29T20:23:15.301851",
          "total_stages": 1,
          "stage_numbers": [2],
          "base_filename": "24_06_10 13_21_12"
        }
      },
      "stages": 1
    },
    {
      "name": "25_02_28 14_02_06 Exp 011_Blak_Silcotek_New_SiO2_TC_QRZ",
      "summary": {
        "metadata": {
          "processed_at": "2025-05-30T10:45:32.123456",
          "total_stages": 3,
          "stage_numbers": [1, 2, 3],
          "base_filename": "25_02_28 14_02_06 Exp 011_Blak_Silcotek_New_SiO2_TC_QRZ"
        }
      },
      "stages": 3
    }
  ]
}</code></pre>

                    <h4>Overall Plot Data Endpoint</h4>
                    <p><code>GET /api/experiment/&lt;experiment_name&gt;/overall?type=&lt;plot_type&gt;</code></p>
                    <p>Returns the Plotly JSON data for the specified plot type. Default plot type is "temperature" if not specified.</p>
                    <p><strong>Parameters:</strong></p>
                    <ul>
                        <li><code>experiment_name</code>: Name of the experiment (URL-encoded if it contains spaces)</li>
                        <li><code>type</code>: Plot type (one of: temperature, multipoint, saturator, pressure, flow, outlet)</li>
                    </ul>
                    <p><strong>Response Example (abbreviated):</strong></p>
                    <pre><code>{
  "metadata": {
    "title": "Temperature Data - 24_06_10 13_21_12",
    "processed_at": "2025-05-29T20:23:15.390748",
    "total_stages": 1
  },
  "data": [
    {
      "x": [0.0, 1.0, 2.0, 3.0, /* ... */],
      "y": [163.3, 165.14, 167.11, 169.02, /* ... */],
      "type": "scatter",
      "mode": "lines",
      "name": "R1/2 T set [°C]",
      "line": {"color": "#ff6e6e", "width": 2}
    },
    {
      "x": [0.0, 1.0, 2.0, 3.0, /* ... */],
      "y": [156.20, 158.31, 160.54, 162.84, /* ... */],
      "type": "scatter",
      "mode": "lines",
      "name": "R1/2 T read [°C]",
      "line": {"color": "#5c9eff", "width": 2}
    }
  ],
  "layout": {
    "title": "Temperature Data - 24_06_10 13_21_12",
    "xaxis": {
      "title": "Time (minutes)"
    },
    "yaxis": {
      "title": "Temperature (°C) / Power (%)"
    }
  }
}</code></pre>

                    <h4>Stage Plot Data Endpoint</h4>
                    <p><code>GET /api/experiment/&lt;experiment_name&gt;/stage/&lt;stage_num&gt;?type=&lt;plot_type&gt;</code></p>
                    <p>Returns the Plotly JSON data for a specific stage and plot type.</p>
                    <p><strong>Parameters:</strong></p>
                    <ul>
                        <li><code>experiment_name</code>: Name of the experiment (URL-encoded if it contains spaces)</li>
                        <li><code>stage_num</code>: Stage number (integer)</li>
                        <li><code>type</code>: Plot type (one of: temperature, multipoint, saturator, pressure, flow, outlet)</li>
                    </ul>
                    
                    <h4>Process Experiment Endpoint</h4>
                    <p><code>GET /api/process/&lt;experiment_name&gt;</code></p>
                    <p>Processes the specified experiment data file. This endpoint finds the matching file in the uploads folder and processes it.</p>
                    <p><strong>Parameters:</strong></p>
                    <ul>
                        <li><code>experiment_name</code>: Name of the experiment to process (URL-encoded if it contains spaces)</li>
                    </ul>
                    <p><strong>Response Example:</strong></p>
                    <pre><code>{
  "success": true,
  "message": "Processed 1 files for experiment '24_06_10 13_21_12'",
  "processed_files": ["24_06_10 13_21_12.txt"]
}</code></pre>

                    <h3 id="data-formats">Data Formats</h3>
                    <p>The API uses the following data formats:</p>
                    <ol>
                        <li><strong>Experiment List Format</strong>: An array of experiment objects, each containing metadata about the experiment.</li>
                        <li><strong>Plotly JSON Format</strong>: A JSON object that follows the Plotly.js format with <code>data</code> (traces) and <code>layout</code> sections.</li>
                        <li><strong>Process Response Format</strong>: A JSON object with success status, message, and processed files information.</li>
                    </ol>

                    <h4>Plotly JSON Structure</h4>
                    <p>The Plotly JSON format is designed to be directly usable by Plotly.js on the frontend:</p>
                    <pre><code>{
  "metadata": {
    "title": "Title of the plot",
    "processed_at": "Timestamp when the plot was generated",
    "total_stages": "Number of stages in the experiment"
  },
  "data": [
    {
      "x": [array of x values (time in minutes)],
      "y": [array of y values (measurements)],
      "type": "scatter",
      "mode": "lines",
      "name": "Name of the trace (column name)"
    },
    // Additional traces for other columns
  ],
  "layout": {
    "title": "Plot title",
    "xaxis": {
      "title": "X-axis title (Time (minutes))"
    },
    "yaxis": {
      "title": "Y-axis title (units)"
    },
    "template": "plotly_dark",
    "paper_bgcolor": "#1e1e1e",
    "plot_bgcolor": "#2d2d2d",
    "font": {"color": "#e0e0e0"}
  }
}</code></pre>

                    <h3 id="error-handling">Error Handling</h3>
                    <p>The API returns appropriate HTTP status codes and error messages when something goes wrong:</p>
                    <ul>
                        <li><strong>400 Bad Request</strong>: When the request parameters are invalid</li>
                        <li><strong>404 Not Found</strong>: When the requested experiment or plot type is not found</li>
                        <li><strong>500 Internal Server Error</strong>: When an unexpected error occurs during processing</li>
                    </ul>
                    <p>Error responses follow this format:</p>
                    <pre><code>{
  "error": "Error message describing what went wrong",
  "available_types": ["List of available plot types (for invalid plot type errors)"]
}</code></pre>

                    <h3 id="api-usage">API Usage Examples</h3>
                    <h4>Python Example: Fetching and Displaying Plot Data</h4>
                    <pre><code>import requests
import json
import matplotlib.pyplot as plt
import plotly.io as pio
import plotly.graph_objects as go

# Base URL for the API
base_url = "http://localhost:8080"

# Get list of experiments
response = requests.get(f"{base_url}/api/experiments")
experiments = response.json()
print(f"Found {len(experiments)} experiments")

# Get temperature plot data for the first experiment
experiment_name = experiments[0]['name']
response = requests.get(f"{base_url}/api/experiment/{experiment_name}/overall?type=temperature")
plot_data = response.json()

# Create Plotly figure
fig = go.Figure()
for trace in plot_data['data']:
    fig.add_trace(go.Scatter(x=trace['x'], y=trace['y'], name=trace['name'], mode=trace['mode']))

fig.update_layout(
    title=plot_data['metadata']['title'],
    xaxis_title="Time (minutes)",
    yaxis_title=plot_data['layout']['yaxis']['title']
)

# Show the figure
fig.show()

# Save plot data to file
with open(f"{experiment_name}_temperature.json", "w") as f:
    json.dump(plot_data, f, indent=2)</code></pre>

                    <h4>JavaScript Example: Fetching and Displaying a Plot</h4>
                    <pre><code>// Base URL for the API
const baseUrl = "http://localhost:8080";

// Function to fetch and display a plot
async function fetchAndDisplayPlot(experimentName, plotType = 'temperature') {
  try {
    // Fetch the plot data
    const response = await fetch(`${baseUrl}/api/experiment/${encodeURIComponent(experimentName)}/overall?type=${plotType}`);
    
    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(`Error: ${errorData.error}`);
    }
    
    const plotData = await response.json();
    
    // Create the plot
    Plotly.newPlot('plot-container', plotData.data, plotData.layout);
    
  } catch (error) {
    console.error('Failed to fetch plot data:', error);
    document.getElementById('plot-container').innerHTML = `<div class="error">${error.message}</div>`;
  }
}

// Example usage
document.addEventListener('DOMContentLoaded', () => {
  const experimentSelector = document.getElementById('experiment-selector');
  const plotTypeSelector = document.getElementById('plot-type-selector');
  
  // Populate the experiment selector
  fetch(`${baseUrl}/api/experiments`)
    .then(response => response.json())
    .then(experiments => {
      experiments.forEach(experiment => {
        const option = document.createElement('option');
        option.value = experiment.name;
        option.textContent = experiment.name;
        experimentSelector.appendChild(option);
      });
      
      // Fetch the first experiment plot if available
      if (experiments.length > 0) {
        fetchAndDisplayPlot(experiments[0].name);
      }
    });
});</code></pre>
                </section>
                
                <hr class="section-divider">
                
                <section id="visualization">
                    <h2>Visualization</h2>
                    
                    <h3 id="plotly-integration">Plotly Integration</h3>
                    <p>The NH3 Cracking Processor and Visualizer uses <a href="https://plotly.com/javascript/" target="_blank" rel="noopener">Plotly.js</a> for creating interactive, web-based visualizations. Plotly.js is a high-level, declarative charting library that makes it easy to create complex charts and visualizations with JavaScript.</p>
                    
                    <p>The application generates Plotly-compatible JSON files that contain both the data (traces) and layout information. These JSON files are then loaded by the web interface and rendered as interactive plots.</p>
                    
                    <p>The main benefits of using Plotly for this application include:</p>
                    <ul>
                        <li><strong>Interactivity</strong>: Users can zoom, pan, hover over data points, and select specific data ranges</li>
                        <li><strong>Customization</strong>: Extensive styling options for creating visually appealing plots</li>
                        <li><strong>Responsiveness</strong>: Plots automatically adjust to different screen sizes</li>
                        <li><strong>Export options</strong>: Plots can be saved as PNG, JPEG, SVG, or PDF files</li>
                        <li><strong>WebGL support</strong>: Fast rendering of large datasets</li>
                    </ul>
                    
                    <h3 id="data-categories">Data Categories</h3>
                    <p>The application organizes measurements into logical categories to facilitate analysis and visualization. Each category has its own dedicated plot type with appropriate axes and labels.</p>
                    
                    <p>The main data categories include:</p>
                    <table class="api-table">
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Description</th>
                                <th>Typical Columns</th>
                                <th>Y-Axis Label</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Temperature</td>
                                <td>Main temperature measurements and heater power</td>
                                <td>R1/2 T set [°C], R1/2 T read [°C], R1/2 T power [%]</td>
                                <td>Temperature (°C) / Power (%)</td>
                            </tr>
                            <tr>
                                <td>Multipoint</td>
                                <td>Multiple thermocouple readings along the reactor</td>
                                <td>R-1/2 T1 [°C], R-1/2 T2 [°C], R-1/2 T3 [°C], etc.</td>
                                <td>Temperature (°C)</td>
                            </tr>
                            <tr>
                                <td>Saturator</td>
                                <td>Saturator temperature measurements</td>
                                <td>Saturator T read [°C]</td>
                                <td>Temperature (°C)</td>
                            </tr>
                            <tr>
                                <td>Pressure</td>
                                <td>Pressure measurements at different points</td>
                                <td>Pressure SETPOINT [bar], Pressure PIC [bar], Pressure reading line [bar], etc.</td>
                                <td>Pressure (bar)</td>
                            </tr>
                            <tr>
                                <td>Flow</td>
                                <td>Flow rates and inlet concentrations</td>
                                <td>NH3 Actual Set-Point [Nml/min], H2 Actual Flow [Nml/min], Tot flow calc [Nml/min], etc.</td>
                                <td>Flow (Nml/min) / Concentration (%)</td>
                            </tr>
                            <tr>
                                <td>Outlet</td>
                                <td>Outlet stream composition</td>
                                <td>NH3 out [%], H2 out [%], H2O out [%]</td>
                                <td>Concentration (%)</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3 id="visualization-types">Visualization Types</h3>
                    <p>The application provides several types of visualizations:</p>
                    
                    <h4>1. Overall Experiment Plots</h4>
                    <p>These plots show data across all stages of the experiment, providing a comprehensive view of the entire experiment. Each data category has its own overall plot.</p>
                    <p>Example API call:</p>
                    <pre><code>GET /api/experiment/24_06_10 13_21_12/overall?type=temperature</code></pre>
                    
                    <h4>2. Stage-Specific Plots</h4>
                    <p>These plots focus on a specific stage of the experiment, allowing for detailed analysis of each stage. Each data category has stage-specific plots.</p>
                    <p>Example API call:</p>
                    <pre><code>GET /api/experiment/24_06_10 13_21_12/stage/2?type=temperature</code></pre>
                    
                    <h4>3. Category-Based Plots</h4>
                    <p>These plots organize data by category (temperature, pressure, flow, etc.), allowing for focused analysis of specific aspects of the experiment.</p>
                    <p>Example: Temperature category plot showing temperature setpoint, actual temperature, and power percentage.</p>
                    
                    <h4>4. Customized Plots</h4>
                    <p>The web interface allows users to customize visualizations in real-time:</p>
                    <ul>
                        <li><strong>Plot Type</strong>: Switch between line plots and scatter plots</li>
                        <li><strong>Theme</strong>: Choose between dark and light themes</li>
                        <li><strong>Visibility</strong>: Toggle the visibility of specific data series</li>
                        <li><strong>Zoom Level</strong>: Zoom in on specific time periods</li>
                        <li><strong>Data Range</strong>: Focus on specific data ranges</li>
                    </ul>
                    
                    <h3 id="interactive-features">Interactive Plot Features</h3>
                    <p>The interactive plots provide several advanced features:</p>
                    
                    <h4>Hover Information</h4>
                    <p>Hover over any data point to see exact values:</p>
                    <ul>
                        <li>X value (time in minutes)</li>
                        <li>Y value (measurement)</li>
                        <li>Series name</li>
                    </ul>
                    
                    <h4>Zoom and Pan</h4>
                    <ul>
                        <li>Zoom in on specific regions by clicking and dragging</li>
                        <li>Double-click to reset the zoom</li>
                        <li>Click and drag the plot to pan</li>
                    </ul>
                    
                    <h4>Plot Controls</h4>
                    <p>The modebar provides additional controls:</p>
                    <ul>
                        <li>Download plot as PNG</li>
                        <li>Zoom in/out</li>
                        <li>Pan</li>
                        <li>Reset axes</li>
                        <li>Toggle spike lines</li>
                        <li>Toggle hover mode</li>
                    </ul>
                    
                    <h3 id="dark-mode">Dark Mode Optimization</h3>
                    <p>The plots are optimized for dark mode, with a dark background and high-contrast colors for better visibility in low-light environments.</p>
                    <p>Default theme settings:</p>
                    <pre><code>PLOTLY_THEME = "plotly_dark"
PLOTLY_PAPER_BGCOLOR = "#1e1e1e"
PLOTLY_PLOT_BGCOLOR = "#2d2d2d"
PLOTLY_FONT_COLOR = "#e0e0e0"
PLOTLY_GRID_COLOR = "rgba(255, 255, 255, 0.1)"</code></pre>
                    
                    <h3 id="customization-options">Customization Options</h3>
                    <p>The visualizations can be customized in several ways:</p>
                    
                    <h4>Backend Customization</h4>
                    <p>Edit <code>config.py</code> to change:</p>
                    <ul>
                        <li>Plot colors</li>
                        <li>Theme settings</li>
                        <li>Data categories</li>
                        <li>Column mappings</li>
                    </ul>
                    
                    <h4>Frontend Customization</h4>
                    <p>The web interface provides controls to:</p>
                    <ul>
                        <li>Switch between line and scatter plots</li>
                        <li>Change the theme</li>
                        <li>Toggle series visibility</li>
                        <li>Focus on specific time periods</li>
                    </ul>
                    
                    <h4>Export Options</h4>
                    <p>The interactive plots can be exported in several formats:</p>
                    <ul>
                        <li><strong>PNG</strong>: High-quality raster image</li>
                        <li><strong>SVG</strong>: Scalable vector graphic</li>
                        <li><strong>JSON</strong>: Raw plot data and layout for further processing</li>
                    </ul>
                    
                    <h3 id="javascript-integration">JavaScript Integration</h3>
                    <p>The frontend renders the JSON data using Plotly.js:</p>
                    <pre><code>// Load plot data from API
async function loadPlotData(experimentName, plotType, stageNum = null) {
    let url;
    
    if (stageNum) {
        url = `/api/experiment/${encodeURIComponent(experimentName)}/stage/${stageNum}?type=${plotType}`;
    } else {
        url = `/api/experiment/${encodeURIComponent(experimentName)}/overall?type=${plotType}`;
    }
    
    const response = await fetch(url);
    const plotData = await response.json();
    
    // Render the plot
    Plotly.newPlot('plot-container', plotData.data, plotData.layout, {
        responsive: true,
        displayModeBar: true
    });
}</code></pre>
                </section>
                
                <hr class="section-divider">
                
                <section id="directory-structure">
                    <h2>Directory Structure</h2>
                    <p>The NH3 Cracking Processor and Visualizer organizes its files and data in a structured manner for better maintainability and user accessibility.</p>
                    
                    <h3 id="application-structure">Application Structure</h3>
                    <p>The main application code is organized as follows:</p>
                    <pre><code>.
├── app.py                   # Main Flask application
├── config.py                # Configuration settings
├── run.py                   # Entry point script
├── Processors/              # Core processing modules
│   ├── __init__.py         # Package initialization
│   ├── Main_Web_ProcessorNH3Crack.py  # Main processing class
│   ├── test_server.py      # Test server script
│   └── run.py              # Run script for Processors module
├── static/                  # Static files (CSS, JS)
└── templates/               # HTML templates</code></pre>
                </section>
                
                <hr class="section-divider">
                
                <section id="output-data">
                    <h2>Output Data</h2>
                    
                    <p>The NH3 Cracking Processor and Visualizer generates several file formats for processed experimental data. These outputs are organized in a structured directory hierarchy within the Reports folder.</p>
                    
                    <h3 id="output-formats">Output Formats</h3>
                    <p>The application generates the following file formats:</p>
                    
                    <ul>
                        <li><strong>CSV Files</strong>: Tabular data format suitable for import into Excel, MATLAB, or other data analysis tools.</li>
                        <li><strong>JSON Files</strong>: Structured data format that maintains type information and hierarchical relationships, suitable for programmatic access.</li>
                        <li><strong>Plotly JSON</strong>: Specialized JSON format that contains visualization data for Plotly.js charts.</li>
                    </ul>
                    
                    <h3 id="experiment-summary-json">Experiment Summary JSON</h3>
                    <p>The experiment summary JSON file (<code>experiment_summary.json</code>) contains metadata about the experiment, including:</p>
                    
                    <pre><code>{
  "experiment_name": "24_06_10 13_21_12",
  "processed_date": "2024-06-10T13:25:45",
  "file_encoding": "utf-8",
  "original_filename": "NH3_Catalyst_Test_20240610.txt",
  "processing_time_seconds": 2.34,
  "columns": [
    "DateTime",
    "Stage",
    "R1/2 T set [°C]",
    "R1/2 T read [°C]",
    "Pressure [bar]",
    "Flow [Nml/min]",
    "Inlet NH3 [%]",
    "Outlet NH3 [%]",
    "Outlet H2 [%]",
    "Outlet N2 [%]"
  ],
  "column_categories": {
    "temperature": ["R1/2 T set [°C]", "R1/2 T read [°C]"],
    "pressure": ["Pressure [bar]"],
    "flow": ["Flow [Nml/min]"],
    "inlet": ["Inlet NH3 [%]"],
    "outlet": ["Outlet NH3 [%]", "Outlet H2 [%]", "Outlet N2 [%]"]
  },
  "stages": {
    "1": {
      "start_time": "2024-06-10T13:21:12",
      "end_time": "2024-06-10T14:35:45",
      "duration_minutes": 74.55,
      "data_points": 75,
      "avg_temperature": 450.8,
      "max_temperature": 452.6,
      "min_temperature": 449.2,
      "avg_pressure": 25.3,
      "avg_flow": 380.4
    },
    "2": {
      "start_time": "2024-06-10T14:35:46",
      "end_time": "2024-06-10T15:45:12",
      "duration_minutes": 69.43,
      "data_points": 70,
      "avg_temperature": 500.2,
      "max_temperature": 502.7,
      "min_temperature": 499.5,
      "avg_pressure": 26.1,
      "avg_flow": 381.2
    }
  },
  "statistics": {
    "total_duration_minutes": 144.0,
    "total_data_points": 145,
    "stage_count": 2,
    "column_count": 10
  }
}</code></pre>
                    
                    <h3 id="complete-data-csv">Complete Data CSV</h3>
                    <p>The complete data CSV file (<code>[experiment_name]_complete.csv</code>) contains all the processed data from the experiment in a tabular format. The file includes the following columns:</p>
                    
                    <ul>
                        <li><strong>DateTime</strong>: The original date and time string from the input file.</li>
                        <li><strong>Time_Minutes</strong>: The relative time in minutes from the start of the experiment.</li>
                        <li><strong>Stage</strong>: The experimental stage identifier.</li>
                        <li><strong>All measurement columns</strong>: The original measurement columns from the input file.</li>
                    </ul>
                    
                    <p>Example of the CSV format:</p>
                    <pre><code>DateTime,Time_Minutes,Stage,R1/2 T set [°C],R1/2 T read [°C],Pressure [bar],Flow [Nml/min],Inlet NH3 [%],Outlet NH3 [%],Outlet H2 [%],Outlet N2 [%]
01/06/24 12:34:56,0.0,1,450.2,451.3,25.3,380.5,100.0,30.5,46.7,22.8
01/06/24 12:35:56,1.0,1,451.3,452.4,25.4,380.2,100.0,30.2,47.1,22.7
01/06/24 12:36:56,2.0,1,450.8,451.9,25.2,380.4,100.0,30.1,47.2,22.7
01/06/24 12:37:56,3.0,2,460.1,461.2,26.0,381.0,100.0,25.4,49.8,24.8
01/06/24 12:38:56,4.0,2,461.5,462.6,26.1,381.2,100.0,25.1,50.0,24.9</code></pre>
                    
                    <h3 id="complete-data-json">Complete Data JSON</h3>
                    <p>The complete data JSON file (<code>[experiment_name]_all_stages.json</code>) contains the same data as the CSV file, but in a structured JSON format. The file is organized as an array of objects, with each object representing one row of data:</p>
                    
                    <pre><code>[
  {
    "DateTime": "01/06/24 12:34:56",
    "Time_Minutes": 0.0,
    "Stage": 1,
    "R1/2 T set [°C]": 450.2,
    "R1/2 T read [°C]": 451.3,
    "Pressure [bar]": 25.3,
    "Flow [Nml/min]": 380.5,
    "Inlet NH3 [%]": 100.0,
    "Outlet NH3 [%]": 30.5,
    "Outlet H2 [%]": 46.7,
    "Outlet N2 [%]": 22.8
  },
  {
    "DateTime": "01/06/24 12:35:56",
    "Time_Minutes": 1.0,
    "Stage": 1,
    "R1/2 T set [°C]": 451.3,
    "R1/2 T read [°C]": 452.4,
    "Pressure [bar]": 25.4,
    "Flow [Nml/min]": 380.2,
    "Inlet NH3 [%]": 100.0,
    "Outlet NH3 [%]": 30.2,
    "Outlet H2 [%]": 47.1,
    "Outlet N2 [%]": 22.7
  }
]</code></pre>
                    
                    <h3 id="stage-data-files">Stage-Specific Data Files</h3>
                    <p>For each stage in the experiment, the application generates stage-specific CSV and JSON files. These files contain only the data for the specific stage and are stored in a dedicated subdirectory (<code>stage_[stage_number]/</code>).</p>
                    
                    <h4>Stage Data CSV</h4>
                    <p>The stage data CSV file (<code>stage_[stage_number]_data.csv</code>) has the same structure as the complete data CSV file, but only includes rows for the specific stage.</p>
                    
                    <h4>Stage Data JSON</h4>
                    <p>The stage data JSON file (<code>stage_[stage_number]_data.json</code>) has the same structure as the complete data JSON file, but only includes objects for the specific stage.</p>
                    
                    <h3 id="plotly-json-files">Plotly JSON Files</h3>
                    <p>The application generates several Plotly JSON files for different visualization types:</p>
                    
                    <ul>
                        <li><strong>Overall Plots</strong>: <code>[experiment_name]_[category]_plotly_data.json</code> (e.g., <code>24_06_10 13_21_12_temp_plotly_data.json</code>)</li>
                        <li><strong>Stage-Specific Plots</strong>: <code>stage_[stage_number]/stage_[stage_number]_[category]_plotly.json</code> (e.g., <code>stage_2/stage_2_temp_plotly.json</code>)</li>
                    </ul>
                    
                    <p>These files contain the Plotly.js visualization data for the respective category (temperature, pressure, flow, etc.) and can be loaded directly into Plotly.js to render the visualizations:</p>
                    
                    <pre><code>{
  "data": [
    {
      "x": [0, 1, 2, 3, 4, 5],
      "y": [450.2, 451.3, 450.8, 460.1, 461.5, 462.1],
      "type": "scatter",
      "mode": "lines+markers",
      "name": "R1/2 T set [°C]",
      "line": {
        "color": "#ff7f0e",
        "width": 2
      },
      "marker": {
        "size": 6
      }
    },
    {
      "x": [0, 1, 2, 3, 4, 5],
      "y": [451.3, 452.4, 451.9, 461.2, 462.6, 463.4],
      "type": "scatter",
      "mode": "lines+markers",
      "name": "R1/2 T read [°C]",
      "line": {
        "color": "#d62728",
        "width": 2
      },
      "marker": {
        "size": 6
      }
    }
  ],
  "layout": {
    "title": "Temperature Plot - Overall Experiment",
    "xaxis": {
      "title": "Time (minutes)"
    },
    "yaxis": {
      "title": "Temperature (°C)"
    },
    "plot_bgcolor": "#22262b",
    "paper_bgcolor": "#22262b",
    "font": {
      "color": "#ffffff"
    },
    "legend": {
      "bgcolor": "#22262b",
      "font": {
        "color": "#ffffff"
      }
    },
    "hovermode": "closest"
  }
}</code></pre>
                    
                    <h3 id="file-naming-convention">File Naming Convention</h3>
                    <p>The application uses the following naming convention for the output files:</p>
                    <ul>
                        <li><strong>Experiment Directory</strong>: <code>[date_time]/</code> (e.g., <code>24_06_10 13_21_12/</code>)</li>
                        <li><strong>Experiment Summary</strong>: <code>experiment_summary.json</code></li>
                        <li><strong>Complete Data CSV</strong>: <code>[date_time]_complete.csv</code> (e.g., <code>24_06_10 13_21_12_complete.csv</code>)</li>
                        <li><strong>Complete Data JSON</strong>: <code>[date_time]_all_stages.json</code> (e.g., <code>24_06_10 13_21_12_all_stages.json</code>)</li>
                        <li><strong>Overall Plot JSON</strong>: <code>[date_time]_[category]_plotly_data.json</code> (e.g., <code>24_06_10 13_21_12_temp_plotly_data.json</code>)</li>
                        <li><strong>Stage Directory</strong>: <code>stage_[stage_number]/</code> (e.g., <code>stage_2/</code>)</li>
                        <li><strong>Stage Data CSV</strong>: <code>stage_[stage_number]_data.csv</code> (e.g., <code>stage_2_data.csv</code>)</li>
                        <li><strong>Stage Data JSON</strong>: <code>stage_[stage_number]_data.json</code> (e.g., <code>stage_2_data.json</code>)</li>
                        <li><strong>Stage Plot JSON</strong>: <code>stage_[stage_number]_[category]_plotly.json</code> (e.g., <code>stage_2_temp_plotly.json</code>)</li>
                    </ul>
                    
                    <h3 id="accessing-output-data">Accessing Output Data</h3>
                    <p>There are several ways to access the processed data:</p>
                    <ol>
                        <li><strong>Web Interface</strong>: The web interface provides access to the processed data through the interactive visualizations and the experiment browser.</li>
                        <li><strong>API</strong>: The RESTful API provides programmatic access to the processed data, including JSON responses for experiment metadata and visualization data.</li>
                        <li><strong>File System</strong>: The processed data can be accessed directly from the Reports folder on the file system.</li>
                    </ol>
                    
                    <p>Example code for accessing data through the API:</p>
                    <pre><code>// JavaScript example for loading experiment data
fetch('/api/experiment/24_06_10 13_21_12/overall')
  .then(response => response.json())
  .then(data => {
    console.log('Experiment data:', data);
  });</code></pre>
                </section>
                
                <hr class="section-divider">
                
                <section id="advanced-configuration">
                    <h2>Advanced Configuration</h2>
                    
                    <p>The NH3 Cracking Processor and Visualizer provides several ways to customize its behavior to suit your specific needs. This section covers the various configuration options available to you.</p>
                    
                    <h3 id="config-file">Configuration File</h3>
                    <p>The main configuration file is <code>config.py</code> located in the root directory of the application. This file contains various settings that control the behavior of the application.</p>
                    
                    <h4>File System Configuration</h4>
                    <p>You can customize the locations of various directories used by the application:</p>
                    
                    <pre><code>## File system configuration
# Base paths for data storage
UPLOADS_FOLDER = os.environ.get('NH3_UPLOADS_FOLDER', os.path.join(BASE_DIR, 'Uploads'))
REPORTS_FOLDER = os.environ.get('NH3_REPORTS_FOLDER', os.path.join(BASE_DIR, 'Reports'))
LOGS_FOLDER = os.environ.get('NH3_LOGS_FOLDER', os.path.join(BASE_DIR, 'Logs'))

# Ensure directories exist
os.makedirs(UPLOADS_FOLDER, exist_ok=True)
os.makedirs(REPORTS_FOLDER, exist_ok=True)
os.makedirs(LOGS_FOLDER, exist_ok=True)</code></pre>
                    
                    <p>Note that these settings can be overridden using environment variables:</p>
                    <ul>
                        <li><code>NH3_UPLOADS_FOLDER</code>: Override the default uploads folder location</li>
                        <li><code>NH3_REPORTS_FOLDER</code>: Override the default reports folder location</li>
                        <li><code>NH3_LOGS_FOLDER</code>: Override the default logs folder location</li>
                    </ul>
                    
                    <h4>Server Configuration</h4>
                    <p>You can customize the server behavior:</p>
                    
                    <pre><code>## Server configuration
# Server settings
DEBUG_MODE = os.environ.get('NH3_DEBUG_MODE', 'False').lower() == 'true'
HOST = os.environ.get('NH3_HOST', '0.0.0.0')
PORT = int(os.environ.get('NH3_PORT', 5000))
SECRET_KEY = os.environ.get('NH3_SECRET_KEY', 'default-secret-key-replace-in-production')

# Security settings
ENABLE_CORS = os.environ.get('NH3_ENABLE_CORS', 'False').lower() == 'true'
ALLOWED_ORIGINS = os.environ.get('NH3_ALLOWED_ORIGINS', '*').split(',')
MAX_CONTENT_LENGTH = int(os.environ.get('NH3_MAX_CONTENT_LENGTH', 16 * 1024 * 1024))  # 16 MB by default</code></pre>
                    
                    <p>These settings can be overridden using environment variables:</p>
                    <ul>
                        <li><code>NH3_DEBUG_MODE</code>: Set to 'true' to enable debug mode</li>
                        <li><code>NH3_HOST</code>: Specify the host address to bind to</li>
                        <li><code>NH3_PORT</code>: Specify the port to listen on</li>
                        <li><code>NH3_SECRET_KEY</code>: Set the secret key for session encryption</li>
                        <li><code>NH3_ENABLE_CORS</code>: Set to 'true' to enable Cross-Origin Resource Sharing</li>
                        <li><code>NH3_ALLOWED_ORIGINS</code>: Comma-separated list of allowed origins for CORS</li>
                        <li><code>NH3_MAX_CONTENT_LENGTH</code>: Maximum allowed size for uploaded files in bytes</li>
                    </ul>
                    
                    <h4>Processing Configuration</h4>
                    <p>You can customize the data processing behavior:</p>
                    
                    <pre><code>## Processing configuration
# File parsing settings
ALLOWED_EXTENSIONS = {'txt', 'csv', 'tsv', 'dat'}
ENCODING_ATTEMPTS = ['utf-8', 'latin1', 'cp1252', 'iso-8859-1']
DATE_FORMATS = [
    '%d/%m/%y %H:%M:%S',  # DD/MM/YY HH:MM:SS
    '%Y-%m-%d %H:%M:%S',  # YYYY-MM-DD HH:MM:SS
    '%d/%m/%Y %H:%M:%S',  # DD/MM/YYYY HH:MM:SS
    '%m/%d/%y %H:%M:%S',  # MM/DD/YY HH:MM:SS
    '%m/%d/%Y %H:%M:%S',  # MM/DD/YYYY HH:MM:SS
]

# Processing settings
INTERPOLATION_METHOD = 'cubic'  # Options: 'linear', 'cubic', 'nearest'
TARGET_INTERVAL_MINUTES = 1.0   # Target interval for interpolated data points
ENABLE_SMOOTHING = True         # Apply smoothing to noisy data
SMOOTHING_WINDOW = 5            # Window size for smoothing algorithm
MIN_POINTS_FOR_CUBIC = 4        # Minimum points required for cubic interpolation</code></pre>
                    
                    <h4>Visualization Configuration</h4>
                    <p>You can customize the visualization behavior:</p>
                    
                    <pre><code>## Visualization configuration
# Default theme settings (dark theme optimized for data visualization)
DEFAULT_THEME = {
    'plot_bgcolor': '#22262b',
    'paper_bgcolor': '#22262b',
    'font': {
        'color': '#ffffff'
    },
    'legend': {
        'bgcolor': '#22262b',
        'font': {
            'color': '#ffffff'
        }
    }
}

# Default color scheme for different measurement types
COLOR_SCHEME = {
    'temperature': ['#ff7f0e', '#d62728', '#e377c2'],
    'pressure': ['#1f77b4', '#17becf', '#9467bd'],
    'flow': ['#2ca02c', '#98df8a', '#aec7e8'],
    'inlet': ['#ff9896', '#ffbb78', '#f7b6d2'],
    'outlet': ['#9edae5', '#c5b0d5', '#c49c94']
}

# Plot layout defaults
DEFAULT_LAYOUT = {
    'margin': {'l': 50, 'r': 30, 't': 50, 'b': 50},
    'hovermode': 'closest',
    'xaxis': {
        'gridcolor': '#444444',
        'linecolor': '#444444',
        'title_font': {'size': 14}
    },
    'yaxis': {
        'gridcolor': '#444444',
        'linecolor': '#444444',
        'title_font': {'size': 14}
    }
}</code></pre>
                    
                    <h4>Logging Configuration</h4>
                    <p>You can customize the logging behavior:</p>
                    
                    <pre><code>## Logging configuration
# Logging settings
LOG_LEVEL = os.environ.get('NH3_LOG_LEVEL', 'INFO')
LOG_FORMAT = os.environ.get('NH3_LOG_FORMAT', '%(asctime)s - %(name)s - %(levelname)s - %(message)s')
LOG_DATE_FORMAT = os.environ.get('NH3_LOG_DATE_FORMAT', '%Y-%m-%d %H:%M:%S')
LOG_TO_CONSOLE = os.environ.get('NH3_LOG_TO_CONSOLE', 'True').lower() == 'true'
LOG_TO_FILE = os.environ.get('NH3_LOG_TO_FILE', 'True').lower() == 'true'
LOG_FILENAME = os.environ.get('NH3_LOG_FILENAME', os.path.join(LOGS_FOLDER, 'application.log'))
LOG_MAX_SIZE = int(os.environ.get('NH3_LOG_MAX_SIZE', 10 * 1024 * 1024))  # 10 MB by default
LOG_BACKUP_COUNT = int(os.environ.get('NH3_LOG_BACKUP_COUNT', 5))</code></pre>
                    
                    <p>These settings can be overridden using environment variables:</p>
                    <ul>
                        <li><code>NH3_LOG_LEVEL</code>: Set the logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)</li>
                        <li><code>NH3_LOG_FORMAT</code>: Customize the log message format</li>
                        <li><code>NH3_LOG_DATE_FORMAT</code>: Customize the date format used in log messages</li>
                        <li><code>NH3_LOG_TO_CONSOLE</code>: Set to 'false' to disable console logging</li>
                        <li><code>NH3_LOG_TO_FILE</code>: Set to 'false' to disable file logging</li>
                        <li><code>NH3_LOG_FILENAME</code>: Specify the log file path</li>
                        <li><code>NH3_LOG_MAX_SIZE</code>: Maximum size in bytes before rotating the log file</li>
                        <li><code>NH3_LOG_BACKUP_COUNT</code>: Number of backup log files to keep</li>
                    </ul>
                    
                    <h3 id="environment-variables">Environment Variables</h3>
                    <p>You can configure the application by setting environment variables. This is particularly useful for containerized deployments or when you want to change settings without modifying the code.</p>
                    
                    <p>To set environment variables in Linux/macOS:</p>
                    <pre><code>export NH3_PORT=8080
export NH3_DEBUG_MODE=true
export NH3_UPLOADS_FOLDER=/path/to/uploads</code></pre>
                    
                    <p>To set environment variables in Windows:</p>
                    <pre><code>set NH3_PORT=8080
set NH3_DEBUG_MODE=true
set NH3_UPLOADS_FOLDER=C:\path\to\uploads</code></pre>
                    
                    <p>To set environment variables in a Docker container:</p>
                    <pre><code>docker run -e NH3_PORT=8080 -e NH3_DEBUG_MODE=true -e NH3_UPLOADS_FOLDER=/data/uploads nh3-processor</code></pre>
                    
                    <h3 id="command-line-arguments">Command Line Arguments</h3>
                    <p>The application supports several command line arguments for quick configuration:</p>
                    
                    <pre><code>python app.py --help
Usage: app.py [OPTIONS]

Options:
  --debug      Enable debug mode
  --port PORT  Specify the port to listen on
  --host HOST  Specify the host to bind to
  --help       Show this message and exit</code></pre>
                    
                    <p>Examples:</p>
                    <pre><code>python app.py --debug --port 8080
python app.py --host 127.0.0.1 --port 5000</code></pre>
                    
                    <h3 id="custom-processors">Custom Processors</h3>
                    <p>You can create custom data processors by adding new Python modules to the <code>Processors</code> directory. Each processor should follow the standard interface:</p>
                    
                    <pre><code>class CustomProcessor:
    def __init__(self, config=None):
        self.config = config or {}
        
    def process(self, dataframe):
        # Custom processing logic here
        return processed_dataframe
        
    def get_metadata(self):
        # Return metadata about this processor
        return {
            'name': 'Custom Processor',
            'description': 'Performs custom data processing',
            'version': '1.0.0'
        }</code></pre>
                    
                    <p>After adding a new processor, you need to register it in the <code>processor_registry.py</code> file:</p>
                    
                    <pre><code>from Processors.custom_processor import CustomProcessor

PROCESSOR_REGISTRY = {
    'default': DefaultProcessor,
    'custom': CustomProcessor,
    # Add more processors here
}</code></pre>
                    
                    <h3 id="custom-visualization-themes">Custom Visualization Themes</h3>
                    <p>You can create custom visualization themes by modifying the <code>DEFAULT_THEME</code> and <code>COLOR_SCHEME</code> dictionaries in the <code>config.py</code> file.</p>
                    
                    <p>Alternatively, you can create a separate theme file and load it at runtime:</p>
                    
                    <pre><code>import json

# Load custom theme from file
with open('custom_theme.json', 'r') as f:
    custom_theme = json.load(f)

# Update default theme
DEFAULT_THEME.update(custom_theme.get('theme', {}))
COLOR_SCHEME.update(custom_theme.get('colors', {}))</code></pre>
                    
                    <h3 id="advanced-deployment">Advanced Deployment</h3>
                    <p>For production deployment, it's recommended to use a proper WSGI server like Gunicorn or uWSGI, and to put a reverse proxy like Nginx in front of the application.</p>
                    
                    <h4>Example Gunicorn Configuration</h4>
                    <pre><code># gunicorn.conf.py
bind = "0.0.0.0:5000"
workers = 4
worker_class = "gevent"
worker_connections = 1000
timeout = 120
keepalive = 2
errorlog = "logs/gunicorn-error.log"
accesslog = "logs/gunicorn-access.log"
loglevel = "info"</code></pre>
                    
                    <p>To run with Gunicorn:</p>
                    <pre><code>gunicorn -c gunicorn.conf.py app:app</code></pre>
                    
                    <h4>Example Nginx Configuration</h4>
                    <pre><code>server {
    listen 80;
    server_name your-server-name.com;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /static {
        alias /path/to/your/app/static;
        expires 30d;
    }
}</code></pre>
                </section>
                
                <hr class="section-divider">
                
                <section id="troubleshooting">
                    <h2>Troubleshooting</h2>
                    <p>This section provides solutions to common issues you might encounter while using the NH3 Cracking Processor and Visualizer.</p>
                    
                    <h3 id="common-issues">Common Issues</h3>
                    
                    <div class="troubleshooting-item">
                        <h4>Application Won't Start</h4>
                        <p><strong>Symptoms:</strong> The application fails to start, or you see error messages in the console.</p>
                        <p><strong>Possible Solutions:</strong></p>
                        <ul>
                            <li>Check if the required directories (Uploads, Reports, Logs) exist and are writable.</li>
                            <li>Verify that all dependencies are installed: <code>pip install -r requirements.txt</code></li>
                            <li>Check if the specified port is already in use. Try a different port: <code>python run.py --port 8081</code></li>
                            <li>Examine the application logs in the Logs directory for specific error messages.</li>
                        </ul>
                    </div>
                    
                    <div class="troubleshooting-item">
                        <h4>File Upload Errors</h4>
                        <p><strong>Symptoms:</strong> Unable to upload files, or files are rejected during upload.</p>
                        <p><strong>Possible Solutions:</strong></p>
                        <ul>
                            <li>Ensure the file format is supported (TXT, CSV, TSV, DAT).</li>
                            <li>Check if the file size is below the maximum allowed size (16MB by default).</li>
                            <li>Verify that the Uploads folder exists and is writable.</li>
                            <li>If using the API, ensure the file is being uploaded with the correct field name ('file').</li>
                            <li>Check for proper file encoding (UTF-8, Latin1, CP1252, ISO-8859-1 are supported).</li>
                        </ul>
                    </div>
                    
                    <div class="troubleshooting-item">
                        <h4>Data Processing Errors</h4>
                        <p><strong>Symptoms:</strong> Files upload successfully but fail during processing.</p>
                        <p><strong>Possible Solutions:</strong></p>
                        <ul>
                            <li>Verify that the file structure matches the expected format (datetime in first column, stage in second column).</li>
                            <li>Check if the datetime format is supported (see Data Processing section).</li>
                            <li>Ensure numeric columns contain valid numeric data.</li>
                            <li>Look for unusual characters or encoding issues in the file.</li>
                            <li>Try processing the file with a different encoding specified explicitly: <code>python scripts/process_file.py --file yourfile.txt --encoding utf-8</code></li>
                        </ul>
                    </div>
                    
                    <div class="troubleshooting-item">
                        <h4>Visualization Issues</h4>
                        <p><strong>Symptoms:</strong> Plots do not display correctly or are empty.</p>
                        <p><strong>Possible Solutions:</strong></p>
                        <ul>
                            <li>Check if the browser console shows any JavaScript errors.</li>
                            <li>Verify that the Plotly JSON files were generated correctly in the Reports folder.</li>
                            <li>Ensure the browser has JavaScript enabled and is compatible with Plotly.js.</li>
                            <li>Try clearing the browser cache or using a different browser.</li>
                            <li>Check if the data contains valid numeric values for plotting.</li>
                        </ul>
                    </div>
                    
                    <div class="troubleshooting-item">
                        <h4>API Connection Issues</h4>
                        <p><strong>Symptoms:</strong> Unable to connect to the API or receiving connection errors.</p>
                        <p><strong>Possible Solutions:</strong></p>
                        <ul>
                            <li>Verify the server is running and accessible.</li>
                            <li>Check if the API endpoint URLs are correct.</li>
                            <li>Ensure CORS is properly configured if accessing from a different domain.</li>
                            <li>Check for firewall or network issues that might be blocking connections.</li>
                            <li>Verify the API request format and parameters are correct.</li>
                        </ul>
                    </div>
                    
                    <div class="troubleshooting-item">
                        <h4>Performance Issues</h4>
                        <p><strong>Symptoms:</strong> Application is slow, especially with large files.</p>
                        <p><strong>Possible Solutions:</strong></p>
                        <ul>
                            <li>Consider increasing the server resources (CPU, memory) for processing large files.</li>
                            <li>Break down very large datasets into smaller files if possible.</li>
                            <li>Adjust the processing parameters in config.py to optimize for your specific use case.</li>
                            <li>Consider using a production WSGI server like Gunicorn instead of the development server.</li>
                            <li>Check if disk I/O is a bottleneck and consider using faster storage.</li>
                        </ul>
                    </div>
                    
                    <div class="troubleshooting-item">
                        <h4>Missing Directories or Permissions Issues</h4>
                        <p><strong>Symptoms:</strong> Errors related to missing directories or permission denied.</p>
                        <p><strong>Possible Solutions:</strong></p>
                        <ul>
                            <li>Run the <code>view_paths.py</code> script to check all application paths and create missing directories.</li>
                            <li>Verify that the user running the application has write permissions for the Uploads, Reports, and Logs directories.</li>
                            <li>Check if environment variables for custom paths are set correctly.</li>
                            <li>For Docker deployments, ensure volumes are properly mounted.</li>
                        </ul>
                    </div>
                    
                    <h3 id="debugging-tips">Debugging Tips</h3>
                    <p>If you're experiencing issues that aren't covered by the common solutions above, try these debugging steps:</p>
                    
                    <ol>
                        <li><strong>Enable Debug Mode</strong>: Run the application with debug mode enabled to get more detailed error messages: <code>python run.py --debug</code></li>
                        <li><strong>Check Logs</strong>: Examine the log files in the Logs directory for detailed error information.</li>
                        <li><strong>Test API Endpoints</strong>: Use tools like curl, Postman, or the built-in API documentation to test API endpoints individually.</li>
                        <li><strong>Validate Input Files</strong>: Check the structure and content of your input files against the expected format.</li>
                        <li><strong>Use the Built-in Diagnostics</strong>: Run the diagnostics script to check the application environment: <code>python scripts/run_diagnostics.py</code></li>
                    </ol>
                    
                    <h3 id="contact-support">Contact Support</h3>
                    <p>If you continue to experience issues after trying the troubleshooting steps above, please contact support:</p>
                    <ul>
                        <li>Email: <a href="mailto:maurizio.gargantini.lv@gmail.com">maurizio.gargantini.lv@gmail.com</a></li>
                        <li>GitHub Issues: <a href="https://github.com/GrennMilo/nh3-cracking-processor/issues" target="_blank" rel="noopener">Submit an Issue</a></li>
                    </ul>
                    
                    <p>When reporting an issue, please include:</p>
                    <ul>
                        <li>A detailed description of the problem</li>
                        <li>Steps to reproduce the issue</li>
                        <li>Relevant log files from the Logs directory</li>
                        <li>Information about your operating system and Python version</li>
                        <li>Sample data files (if applicable and not confidential)</li>
                    </ul>
                </section>
                
                <hr class="section-divider">
                
                <section id="conclusion">
                    <h2>Conclusion</h2>
                    <p>The NH3 Cracking Processor and Visualizer is a comprehensive tool for processing and visualizing experimental data from ammonia cracking experiments. This documentation provides a detailed overview of its features, usage, and configuration options.</p>
                    
                    <p>Key features include:</p>
                    <ul>
                        <li>Automated data processing and stage detection</li>
                        <li>Interactive visualizations using Plotly</li>
                        <li>Comprehensive API for programmatic access</li>
                        <li>Flexible configuration options</li>
                        <li>Diagnostic and troubleshooting tools</li>
                    </ul>
                    
                    <p>We hope this tool enhances your research and data analysis workflow. If you have suggestions for improvements or encounter any issues, please don't hesitate to contact us.</p>
                    
                    <div class="footer-note">
                        <p>Documentation last updated: May 2025</p>
                        <p>NH3 Cracking Processor and Visualizer v1.0.0</p>
                    </div>
                </section>
            </div>
            
            <div class="toc">
                <h3>Table of Contents</h3>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li>
                        <a href="#features">Features</a>
                        <ul>
                            <li><a href="#data-processing-capabilities">Data Processing Capabilities</a></li>
                            <li><a href="#analysis-and-visualization">Analysis and Visualization</a></li>
                            <li><a href="#interface-and-access">Interface and Access</a></li>
                            <li><a href="#data-management">Data Management</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#installation">Installation</a>
                        <ul>
                            <li><a href="#prerequisites">Prerequisites</a></li>
                            <li><a href="#installation-steps">Installation Steps</a></li>
                            <li><a href="#verifying-installation">Verifying Installation</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#quick-start">Quick Start</a>
                        <ul>
                            <li><a href="#running-the-application">Running the Application</a></li>
                            <li><a href="#processing-data">Processing Data</a></li>
                            <li><a href="#viewing-results">Viewing Results</a></li>
                            <li><a href="#sample-data">Sample Data</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#data-processing">Data Processing</a>
                        <ul>
                            <li><a href="#input-format">Input Format</a></li>
                            <li><a href="#processing-pipeline">Processing Pipeline</a></li>
                            <li><a href="#time-vector-handling">Time Vector Handling</a></li>
                            <li><a href="#stage-detection">Stage Detection</a></li>
                            <li><a href="#data-interpolation">Data Interpolation</a></li>
                            <li><a href="#nan-handling">NaN Handling in JSON</a></li>
                            <li><a href="#file-output">File Output and Organization</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#api-reference">API Reference</a>
                        <ul>
                            <li><a href="#api-endpoints">API Endpoints</a></li>
                            <li><a href="#api-response-examples">API Response Examples</a></li>
                            <li><a href="#data-formats">Data Formats</a></li>
                            <li><a href="#error-handling">Error Handling</a></li>
                            <li><a href="#api-usage-examples">API Usage Examples</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#visualization">Visualization</a>
                        <ul>
                            <li><a href="#plotly-integration">Plotly Integration</a></li>
                            <li><a href="#data-categories">Data Categories</a></li>
                            <li><a href="#visualization-types">Visualization Types</a></li>
                            <li><a href="#interactive-features">Interactive Features</a></li>
                            <li><a href="#dark-mode-optimization">Dark Mode Optimization</a></li>
                            <li><a href="#customization-options">Customization Options</a></li>
                            <li><a href="#export-options">Export Options</a></li>
                            <li><a href="#javascript-integration">JavaScript Integration</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#directory-structure">Directory Structure</a>
                        <ul>
                            <li><a href="#application-structure">Application Structure</a></li>
                            <li><a href="#data-organization">Data Organization</a></li>
                            <li><a href="#report-structure">Report Structure</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#output-data">Output Data</a>
                        <ul>
                            <li><a href="#output-formats">Output Formats</a></li>
                            <li><a href="#experiment-summary-json">Experiment Summary JSON</a></li>
                            <li><a href="#complete-data-csv">Complete Data CSV</a></li>
                            <li><a href="#complete-data-json">Complete Data JSON</a></li>
                            <li><a href="#stage-data-files">Stage-Specific Data Files</a></li>
                            <li><a href="#plotly-json-files">Plotly JSON Files</a></li>
                            <li><a href="#file-naming-convention">File Naming Convention</a></li>
                            <li><a href="#accessing-output-data">Accessing Output Data</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#advanced-configuration">Advanced Configuration</a>
                        <ul>
                            <li><a href="#config-file">Configuration File</a></li>
                            <li><a href="#environment-variables">Environment Variables</a></li>
                            <li><a href="#command-line-arguments">Command Line Arguments</a></li>
                            <li><a href="#custom-processors">Custom Processors</a></li>
                            <li><a href="#custom-visualization-themes">Custom Visualization Themes</a></li>
                            <li><a href="#advanced-deployment">Advanced Deployment</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#troubleshooting">Troubleshooting</a>
                        <ul>
                            <li><a href="#common-issues">Common Issues</a></li>
                            <li><a href="#debugging-tips">Debugging Tips</a></li>
                            <li><a href="#contact-support">Contact Support</a></li>
                        </ul>
                    </li>
                    <li><a href="#conclusion">Conclusion</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <a id="back-to-top" href="#top">↑ Back to Top</a>
    
    <script>
        // Show/hide back to top button based on scroll position
        window.addEventListener('scroll', function() {
            const backToTopButton = document.getElementById('back-to-top');
            if (window.pageYOffset > 300) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        });
        
        // Ensure back to top button is correctly initialized
        document.addEventListener('DOMContentLoaded', function() {
            const backToTopButton = document.getElementById('back-to-top');
            backToTopButton.style.display = window.pageYOffset > 300 ? 'block' : 'none';
            
            // Add smooth scrolling to all links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        // Scroll smoothly to the target
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });
                        
                        // Update URL without scrolling
                        history.pushState(null, null, targetId);
                    }
                });
            });
        });
    </script>
</body>
</html> 